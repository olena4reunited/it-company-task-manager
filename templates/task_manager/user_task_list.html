{% extends "base.html" %}

{% block title %}
	<title>{{ user.username }} Task List</title>
{% endblock %}

{% block content %}
	<div class="container my-4">
		<h1 class="text-center mb-4">{{ user.first_name }} {{ user.last_name }}'s Task List</h1>
	
		<div class="text-end mb-3">
			<a href="{% url 'task-manager:task-create' %}" class="btn btn-success">Create Task</a>
		</div>
		
		<form method="get" class="mb-4">
			<div class="input-group">
				<input type="text" name="task_type_name" class="form-control" placeholder="Search by Task Type" value="{{ task_type_name }}">
				<button class="btn btn-primary" type="submit">Search</button>
			</div>
		</form>
	
		<div class="row">
			{% for task in tasks %}
				<div class="col-md-4 mb-4">
					<div class="card shadow-sm">
						<div class="card-header d-flex justify-content-between align-items-center">
							<h5 class="mb-0">{{ task.name }}</h5>
							<span class="badge bg-danger">{{ task.deadline }}</span>
						</div>
						<div class="card-body">
							<h6 class="card-title">{{ task.task_type.name }}</h6>
							<div class="d-flex justify-content-between">
								<a href="{% url 'task-manager:task-detail' pk=task.id %}" class="btn btn-info">Detail</a>
								{% if request.user == task.created_by %}
									<div>
										<a href="{% url 'task-manager:task-update' pk=task.id %}" class="btn btn-primary me-2">Update</a>
										<a href="{% url 'task-manager:task-delete' pk=task.id %}" class="btn btn-danger">Delete</a>
									</div>
								{% endif %}
							</div>
						</div>
					</div>
				</div>
			{% empty %}
				<div class="alert alert-warning mb-4" role="alert">
					<h5 class="alert-heading">No tasks found</h5>
				</div>				
			{% endfor %}
		</div>
	</div>
{% endblock %}
